{"version":3,"sources":["location_api.js","dom.js","weather.js","index.js"],"names":["LocationApi","fetch","then","response","status","json","Error","objIp","ip","location","city","Dom","preloaderDivStyle","document","querySelector","style","errorInfoParentDivStyle","errorInfoTextDiv","errorInfoOkButton","cityDiv","cloudinessDiv","weatherStatusDiv","tempDiv","humidityDiv","windDiv","findCityButton","findCityInput","display","obj","innerText","cloudiness","weatherStatus","temp","humidity","wind","value","Weather","cityName","weather","Math","round","main","clouds","all","description","name","speed","locationApi","dom","getWeatherByCity","showPreloader","getWeather","getCityValueFromInput","weatherInfo","setInfoWeather","catch","showErrorInfo","finally","hidePreloader","appStart","getMyIp","getMyLocation","addEventListener","key","keyCode","hideErrorInfo"],"mappings":"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","file":"src.9bd1180f.js","sourceRoot":"..\\src","sourcesContent":["/* eslint-disable class-methods-use-this */\r\nexport default class LocationApi {\r\n  getMyIp() {\r\n    return fetch('https://api.ipify.org?format=json')\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          return response.json();\r\n        }\r\n        throw new Error(response.status);\r\n      })\r\n      .then(objIp => objIp.ip);\r\n  }\r\n\r\n  getMyLocation(ip) {\r\n    return fetch(`https://ipapi.co/${ip}/json/`)\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          return response.json();\r\n        }\r\n        throw new Error(response.status);\r\n      })\r\n      .then(location => location.city);\r\n  }\r\n}\r\n","export default class Dom {\r\n  constructor() {\r\n    this.preloaderDivStyle = document.querySelector('#preloader').style;\r\n    this.errorInfoParentDivStyle = document.querySelector('#error_info').style;\r\n    this.errorInfoTextDiv = document.querySelector('#error_info_text');\r\n    this.errorInfoOkButton = document.querySelector('#error_info_ok_button');\r\n    this.cityDiv = document.querySelector('#city');\r\n    this.cloudinessDiv = document.querySelector('#cloudiness');\r\n    this.weatherStatusDiv = document.querySelector('#weather_status');\r\n    this.tempDiv = document.querySelector('#temp');\r\n    this.humidityDiv = document.querySelector('#humidity');\r\n    this.windDiv = document.querySelector('#wind');\r\n    this.findCityButton = document.querySelector('#find_city_button');\r\n    this.findCityInput = document.querySelector('#find_city_input');\r\n  }\r\n\r\n  showPreloader() {\r\n    this.preloaderDivStyle.display = 'flex';\r\n  }\r\n\r\n  hidePreloader() {\r\n    this.preloaderDivStyle.display = 'none';\r\n  }\r\n\r\n  showErrorInfo() {\r\n    this.errorInfoParentDivStyle.display = 'flex';\r\n  }\r\n\r\n  hideErrorInfo() {\r\n    this.errorInfoParentDivStyle.display = 'none';\r\n  }\r\n\r\n  setInfoWeather(obj) {\r\n    this.cityDiv.innerText = obj.city;\r\n    this.cloudinessDiv.innerText = `cloudiness: ${obj.cloudiness}%`;\r\n    this.weatherStatusDiv.innerText = obj.weatherStatus;\r\n    this.tempDiv.innerText = `${obj.temp}Â°C`;\r\n    this.humidityDiv.innerText = `humidity: ${obj.humidity}%`;\r\n    this.windDiv.innerText = `wind speed: ${obj.wind} m/s`;\r\n  }\r\n\r\n  getCityValueFromInput() {\r\n    return this.findCityInput.value;\r\n  }\r\n}\r\n","/* eslint-disable class-methods-use-this */\r\nexport default class Weather {\r\n  getWeather(cityName) {\r\n    return fetch(\r\n      `https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=12c7488f70bcd015f75b9a10d559d91f`\r\n    )\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          return response.json();\r\n        }\r\n        throw new Error(response.status);\r\n      })\r\n      .then(weather => {\r\n        return {\r\n          temp: Math.round(weather.main.temp - 273.15),\r\n          cloudiness: weather.clouds.all,\r\n          weatherStatus: weather.weather[0].description,\r\n          city: weather.name,\r\n          wind: weather.wind.speed,\r\n          humidity: weather.main.humidity\r\n        };\r\n      });\r\n  }\r\n}\r\n","import LocationApi from './location_api';\r\nimport Dom from './dom';\r\nimport Weather from './weather';\r\n\r\nconst locationApi = new LocationApi();\r\nconst dom = new Dom();\r\nconst weather = new Weather();\r\n\r\nfunction getWeatherByCity(city) {\r\n  dom.showPreloader();\r\n  weather\r\n    .getWeather(city || dom.getCityValueFromInput())\r\n    .then(weatherInfo => {\r\n      dom.setInfoWeather(weatherInfo);\r\n    })\r\n    .catch((status) => {\r\n      dom.errorInfoTextDiv.innerText = status;\r\n      dom.showErrorInfo();\r\n    })\r\n    .finally(() => dom.hidePreloader());\r\n}\r\n\r\nfunction appStart() {\r\n  dom.showPreloader();\r\n  locationApi\r\n    .getMyIp()\r\n    .then(ip => locationApi.getMyLocation(ip))\r\n    .then(city => getWeatherByCity(city));\r\n}\r\n\r\nappStart();\r\n\r\ndom.findCityInput.addEventListener('keydown', key => {\r\n  if (key.keyCode === 13) {\r\n    getWeatherByCity();\r\n  }\r\n});\r\n\r\ndom.findCityButton.addEventListener('click', () => getWeatherByCity());\r\ndom.errorInfoOkButton.addEventListener('click', () => dom.hideErrorInfo());\r\n"]}