{"version":3,"sources":["location_api.js","dom.js","weather.js","index.js"],"names":["LocationApi","fetch","then","response","status","json","Error","objIp","ip","location","city","Dom","preloaderDiv","document","querySelector","errorInfoParentDiv","errorInfoTextDiv","errorInfoOkButton","cityDiv","cloudinessDiv","weatherStatusDiv","tempDiv","humidityDiv","windDiv","findCityButton","findCityInput","style","display","blur","focus","obj","innerText","cloudiness","weatherStatus","temp","humidity","wind","value","setAttribute","setTimeout","Weather","cityName","weather","Math","round","main","clouds","all","description","name","speed","locationApi","dom","getWeatherByCity","showPreloader","getWeather","getCityValueFromInput","weatherInfo","setInfoWeather","catch","showErrorInfo","finally","hidePreloader","appStart","getMyIp","getMyLocation","findNewCity","emptyInput","addEventListener","key","keyCode","window","hideErrorInfo"],"mappings":"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","file":"src.6d2caa59.js","sourceRoot":"..\\src","sourcesContent":["/* eslint-disable class-methods-use-this */\r\nexport default class LocationApi {\r\n  getMyIp() {\r\n    return fetch('https://api.ipify.org?format=json')\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          return response.json();\r\n        }\r\n        throw new Error(response.status);\r\n      })\r\n      .then(objIp => objIp.ip);\r\n  }\r\n\r\n  getMyLocation(ip) {\r\n    return fetch(`https://ipapi.co/${ip}/json/`)\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          return response.json();\r\n        }\r\n        throw new Error(response.status);\r\n      })\r\n      .then(location => location.city);\r\n  }\r\n}\r\n","export default class Dom {\r\n  constructor() {\r\n    this.preloaderDiv = document.querySelector('#preloader');\r\n    this.errorInfoParentDiv = document.querySelector('#error_info');\r\n    this.errorInfoTextDiv = document.querySelector('#error_info_text');\r\n    this.errorInfoOkButton = document.querySelector('#error_info_ok_button');\r\n    this.cityDiv = document.querySelector('#city');\r\n    this.cloudinessDiv = document.querySelector('#cloudiness');\r\n    this.weatherStatusDiv = document.querySelector('#weather_status');\r\n    this.tempDiv = document.querySelector('#temp');\r\n    this.humidityDiv = document.querySelector('#humidity');\r\n    this.windDiv = document.querySelector('#wind');\r\n    this.findCityButton = document.querySelector('#find_city_button');\r\n    this.findCityInput = document.querySelector('#find_city_input');\r\n  }\r\n\r\n  showPreloader() {\r\n    this.preloaderDiv.style.display = 'flex';\r\n  }\r\n\r\n  hidePreloader() {\r\n    this.preloaderDiv.style.display = 'none';\r\n  }\r\n\r\n  showErrorInfo() {\r\n    this.findCityInput.blur();\r\n    this.errorInfoParentDiv.style.display = 'flex';\r\n  }\r\n\r\n  hideErrorInfo() {\r\n    this.errorInfoParentDiv.style.display = 'none';\r\n    this.findCityInput.focus();\r\n  }\r\n\r\n  setInfoWeather(obj) {\r\n    this.cityDiv.innerText = obj.city;\r\n    this.cloudinessDiv.innerText = `cloudiness: ${obj.cloudiness}%`;\r\n    this.weatherStatusDiv.innerText = obj.weatherStatus;\r\n    this.tempDiv.innerText = `${obj.temp}Â°C`;\r\n    this.humidityDiv.innerText = `humidity: ${obj.humidity}%`;\r\n    this.windDiv.innerText = `wind speed: ${obj.wind} m/s`;\r\n  }\r\n\r\n  getCityValueFromInput() {\r\n    return this.findCityInput.value;\r\n  }\r\n\r\n  emptyInput() {\r\n    this.findCityInput.setAttribute('class', 'input empty_input');\r\n    this.findCityInput.focus();\r\n    setTimeout(() => { this.findCityInput.setAttribute('class', 'input') }, 2000);\r\n  }\r\n}\r\n","/* eslint-disable class-methods-use-this */\r\nexport default class Weather {\r\n  getWeather(cityName) {\r\n    return fetch(\r\n      `https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=12c7488f70bcd015f75b9a10d559d91f`\r\n    )\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          return response.json();\r\n        }\r\n        throw new Error(response.status);\r\n      })\r\n      .then(weather => {\r\n        return {\r\n          temp: Math.round(weather.main.temp - 273.15),\r\n          cloudiness: weather.clouds.all,\r\n          weatherStatus: weather.weather[0].description,\r\n          city: weather.name,\r\n          wind: weather.wind.speed,\r\n          humidity: weather.main.humidity\r\n        };\r\n      });\r\n  }\r\n}\r\n","import LocationApi from './location_api';\r\nimport Dom from './dom';\r\nimport Weather from './weather';\r\n\r\nconst locationApi = new LocationApi();\r\nconst dom = new Dom();\r\nconst weather = new Weather();\r\n\r\nfunction getWeatherByCity(city) {\r\n  if (!city) {\r\n    dom.showPreloader();\r\n  }\r\n  weather\r\n    .getWeather(city || dom.getCityValueFromInput())\r\n    .then(weatherInfo => {\r\n      dom.setInfoWeather(weatherInfo);\r\n    })\r\n    .catch((status) => {\r\n      dom.errorInfoTextDiv.innerText = status;\r\n      dom.showErrorInfo();\r\n    })\r\n    .finally(() => dom.hidePreloader());\r\n}\r\n\r\nfunction appStart() {\r\n  dom.showPreloader();\r\n  locationApi\r\n    .getMyIp()\r\n    .then(ip => locationApi.getMyLocation(ip))\r\n    .then(city => getWeatherByCity(city));\r\n}\r\n\r\nfunction findNewCity() {\r\n  if (dom.findCityInput.value !== '') {\r\n    getWeatherByCity();\r\n  } else dom.emptyInput();\r\n}\r\n\r\nappStart();\r\n\r\ndom.findCityInput.addEventListener('keydown', key => {\r\n  if (key.keyCode === 13) {\r\n    findNewCity()\r\n  }\r\n});\r\n\r\nwindow.addEventListener('keydown', key => {\r\n  if (key.keyCode === 13) {\r\n    if (dom.errorInfoParentDiv.style.display === 'flex') {\r\n      dom.hideErrorInfo();\r\n    }\r\n  }\r\n});\r\n\r\ndom.findCityButton.addEventListener('click', findNewCity);\r\n\r\ndom.errorInfoOkButton.addEventListener('click', () => dom.hideErrorInfo());\r\n"]}