{"version":3,"sources":["location_api.js","dom.js","weather.js","index.js"],"names":["LocationApi","fetch","then","response","status","json","Error","objIp","ip","location","city","Dom","loadingDivStyle","document","querySelector","style","cityDiv","cloudinessDiv","weatherStatusDiv","tempDiv","humidityDiv","windDiv","findCityButton","findCityInput","display","obj","innerText","cloudiness","weatherStatus","temp","humidity","wind","value","Weather","cityName","weather","Math","round","main","clouds","all","description","name","speed","locationApi","dom","getWeatherByCity","showPreloader","getWeather","getCityValueFromInput","weatherInfo","setInfoWeather","catch","alert","finally","hidePreloader","appStart","getMyIp","getMyLocation","addEventListener","key","keyCode"],"mappings":";;AGAA;;AACA;;AACA;;;;AAEA,IAAM4C,WAAW,GAAG,IAAI5C,qBAAJ,EAApB;AACA,IAAM6C,GAAG,GAAG,IAAIlC,YAAJ,EAAZ;AACA,IAAMwB,OAAO,GAAG,IAAIF,gBAAJ,EAAhB;AHNA,AEAA,IDAqBtB;AEQrB,IHPqBX,AEAAiC,KCOZa,gBAAT,CAA0BpC,IAA1B,EAAgC;AAC9BmC,EAAAA,GAAG,CAACE,aAAJ;AFRA,AESAZ,EAAAA,OAAO,CACJa,OFVW,GESd,CACctC,IAAI,IAAImC,GAAG,CAACI,qBAAJ,EADtB,EAEG/C,IAFH,CAEQ,UAAAgD,WAAW,EAAI;AFXT,AEYVL,IAAAA,GAAG,CAACM,cAAJ,CAAmBD,WAAnB;AACD,GAJH,EAKGE,KALH,CAKSC,KALT,EAMGC,OANH,CAMW;AFdT,AEcS,SFdJ1C,EEcUiC,GAAG,CAACU,SFdnB,GAAuB1C,CEcR,EAAN,KFdsB,CAACC,aAAT,CAAuB,UAAvB,EAAmCC,KAA1D;AACA,AEaS,GANX,MFPOC,OAAL,GAAeH,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAf;AACA,AEaH,SFbQG,aAAL,GAAqBJ,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAArB;AACA,SAAKI,gBAAL,GAAwBL,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAxB;AACA,AEaJ,SFbSK,AEaAqC,OFbL,CEaJ,EFbmB3C,CEaC,OFbO,CAACC,EDJhB,CEACoB,UDIM,ACJI,CDImB,OAAvB,CAAf;AACA,AEaFW,AHjBE,AEAA,ECiBFA,GAAG,CAACE,GFbG3B,IDJEnB,AEAAA,KFAK,AEAA,CCiBd,AHjBe,CCIb,GAAmBY,QAAQ,CAACC,aAAT,CAAuB,QDJ9B,CAAL,CACJZ,CCGgB,CAAnB,EDJO,CACC,UAAAC,QAAQ,AEAuC+B,EFAnC,MEDR,6CAAL,CAGJhC,IAHI,CAGC,UAAAC,QAAQ,EAAI;ADEpB,AEaFyC,AHhBM,AEEA,ECcNA,OFbOvB,GDHGlB,AEEAA,CCcC,CACRsD,EFdD,GAAe5C,CDHC,AEEA,CCclB,AHhBmBT,AEEAA,GCgBhBF,GFfsB,ADHf,AEEA,CDCgBY,AEa1B,CAEQ,GHlBsB,AEEA,GFFxB,AEEA,EFF6B,AEEA,ECgB3BN,EFfS,AEeP,CFf8B,OAAvB,CAAf;AACA,AEcQ,AHjBF,AEEA,SDCDc,EEcOsB,MHjBCzC,AEEAA,KCeU,CFdvB,AEcwBuD,EHjBH,AEEA,CDCC7C,ADHAR,AEEAA,IFFT,AEEA,EFFP,AEEA,EDCwB,CAACS,CEcnB,CAA0BN,EAA1B,CAAJ,QFdc,CAAuB,mBAAvB,CAAtB;AACA,AEaQ,AHhBH,AEEA,GCYP,EAGGN,IFdIqB,AEWP,CAGQ,UAAAb,EFdN,EEcU,CFdWG,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAArB;AACD,AEaW,WAAIgC,gBAAgB,CAACpC,IAAD,CAApB;AAAA,AHhBN,AEEA,GCWN,WHbY,AEEA,IFFIJ,AEEAA,KFFJ,AEEA,CFFUH,AEEAA,QFFQ,AEEA,CFFCC,AEEAA,MFFnB,AEEA,CFFN,AEEA;ACeP,AHhBM,AEEA,OFRI,AEAA,EFOJF,AEEAA,IFTI,AEAA,CFOC,AEEA,UFFAK,AEEA4B,KFFK,EEEE,EAAI;AFFN,AEGT,eFHa5B,AEGN,KFHW,CAACC,EAAV;AGiBjBgD,AHjBiB,AEIP3B,OFXC,CGwBH,AHxBJ,EEWMA,IAAI,EAAEO,IAAI,CAACC,KAAL,CAAWF,OAAO,CAACG,CDDjB,GCCS,CAAaT,IAAb,GAAoB,MAA/B,CADD;ADCX,AEeJgB,AHlBG,AEIOlB,GCcP,CAACJ,MDdMI,CDDDf,MEeT,CAAkB+C,EDdE,EAAExB,IDDlB,CAAqBX,ECCI,CAACe,IDD1B,AEeJ,CAAmC,CDdb,CDDa,ACCEC,GAFtB,IDCX,AEeJ,EAA8C,UAAAoB,GAAG,EAAI;AFdlD,AEeD,ADdQhC,MCcJgC,GAAG,CAACC,ADdAjC,OCcJ,KAAgB,CDdC,CCcrB,CDduBO,CCcC,MDdM,CAACA,OAAR,CAAgB,CAAhB,EAAmBM,WAH7B;ACkBXK,ADdMpC,ICcNoC,MDdMpC,IAAI,EAAEyB,ICcI,GDdG,CAACO,IAJT;ACmBZ,ADdOX,UAAAA,IAAI,EAAEI,OAAO,CAACJ,IAAR,CAAaY,KFLbnC,AEAD,IFAK;AGoBnB,AHnBG,AEKMsB,CCUV,SDVUA,GFLC7B,KAAK,AEKE,EAAEkC,OAAO,CAACG,IAAR,CAAaR,GDFf,UDHmBtB,EAArB,YAAL,CACJN,IADI,CACC,UAAAC,QAAQ,EAAI;ACGpB,AEiBJ0C,AHnBQ,AEHO,GCsBZ,CAACvB,KDtBI,EDKCV,CDFGT,MGmBZ,CAAmBwD,CHnBC,CAACvD,KCEjB,CAAqBoB,ADFb,KAAoB,ECE5B,CEiBJ,AHnBQ,CGmB4B,CFjBD,ADFE,MCEjC,AEiBJ,EAA6C;AFhB1C,AEgB0C,AHlBnC,AEIH,OAlBI,CAAP,CCgC+CsB,QHlBlC3C,QGkBkD,AHlB1C,CAACE,CGkBmB,GHlB5B,EAAP;AGkBmC,AHjBpC,AEIN,CCaH;;AHhBQ,cAAM,IAAIC,KAAJ,CAAUH,QAAQ,CAACC,ECEhBqB,IDFH,CCEQ,ADFd;ACGJ,ADFG,OANI,EAOJvB,ECCEc,EDRE,CAOC,ICCR,CAAaU,KDDLjB,ICCR,GAAyBgB,CDDT,ECCY,CAACf,IAA7B;AACA,ADFgB,WCEXO,IDFeR,QAAQ,CCE5B,ADF6BC,CCEVgB,GDFH,MCEhB,yBAA8CD,GAAG,CAACE,UAAlD;AACA,ADHgB,OAPT,CAAP,GCUKT,gBAAL,CAAsBQ,SAAtB,GAAkCD,GAAG,CAACG,aAAtC;AACA,ADHD,WCGMT,OAAL,CAAaO,SAAb,aAA4BD,GAAG,CAACI,IAAhC;AACA,WAAKT,WAAL,CAAiBM,SAAjB,uBAA0CD,GAAG,CAACK,QAA9C;AACA,WAAKT,OAAL,CAAaK,SAAb,yBAAwCD,GAAG,CAACM,IAA5C;AACD;;;4CAEuB;AACtB,aAAO,KAAKR,aAAL,CAAmBS,KAA1B;AACD","file":"src.e31bb0bc.js","sourceRoot":"..\\src","sourcesContent":["/* eslint-disable class-methods-use-this */\r\nexport default class LocationApi {\r\n  getMyIp() {\r\n    return fetch('https://api.ipify.org?format=json')\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          return response.json();\r\n        }\r\n        throw new Error(response.status);\r\n      })\r\n      .then(objIp => objIp.ip);\r\n  }\r\n\r\n  getMyLocation(ip) {\r\n    return fetch(`https://ipapi.co/${ip}/json/`)\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          return response.json();\r\n        }\r\n        throw new Error(response.status);\r\n      })\r\n      .then(location => location.city);\r\n  }\r\n}\r\n","export default class Dom {\r\n  constructor() {\r\n    this.loadingDivStyle = document.querySelector('#loading').style;\r\n    this.cityDiv = document.querySelector('#city');\r\n    this.cloudinessDiv = document.querySelector('#cloudiness');\r\n    this.weatherStatusDiv = document.querySelector('#weather_status');\r\n    this.tempDiv = document.querySelector('#temp');\r\n    this.humidityDiv = document.querySelector('#humidity');\r\n    this.windDiv = document.querySelector('#wind');\r\n    this.findCityButton = document.querySelector('#find_city_button');\r\n    this.findCityInput = document.querySelector('#find_city_input');\r\n  }\r\n\r\n  showPreloader() {\r\n    this.loadingDivStyle.display = 'block';\r\n  }\r\n\r\n  hidePreloader() {\r\n    this.loadingDivStyle.display = 'none';\r\n  }\r\n\r\n  setInfoWeather(obj) {\r\n    this.cityDiv.innerText = obj.city;\r\n    this.cloudinessDiv.innerText = `cloudiness: ${obj.cloudiness}%`;\r\n    this.weatherStatusDiv.innerText = obj.weatherStatus;\r\n    this.tempDiv.innerText = `${obj.temp}Â°C`;\r\n    this.humidityDiv.innerText = `humidity: ${obj.humidity}%`;\r\n    this.windDiv.innerText = `wind speed: ${obj.wind} m/s`;\r\n  }\r\n\r\n  getCityValueFromInput() {\r\n    return this.findCityInput.value;\r\n  }\r\n}\r\n","/* eslint-disable class-methods-use-this */\r\nexport default class Weather {\r\n  getWeather(cityName) {\r\n    return fetch(\r\n      `https://api.openweathermap.org/data/2.5/weather?q=${cityName}&appid=12c7488f70bcd015f75b9a10d559d91f`\r\n    )\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          return response.json();\r\n        }\r\n        throw new Error(response.status);\r\n      })\r\n      .then(weather => {\r\n        return {\r\n          temp: Math.round(weather.main.temp - 273.15),\r\n          cloudiness: weather.clouds.all,\r\n          weatherStatus: weather.weather[0].description,\r\n          city: weather.name,\r\n          wind: weather.wind.speed,\r\n          humidity: weather.main.humidity\r\n        };\r\n      });\r\n  }\r\n}\r\n","import LocationApi from './location_api';\r\nimport Dom from './dom';\r\nimport Weather from './weather';\r\n\r\nconst locationApi = new LocationApi();\r\nconst dom = new Dom();\r\nconst weather = new Weather();\r\n\r\nfunction getWeatherByCity(city) {\r\n  dom.showPreloader();\r\n  weather\r\n    .getWeather(city || dom.getCityValueFromInput())\r\n    .then(weatherInfo => {\r\n      dom.setInfoWeather(weatherInfo);\r\n    })\r\n    .catch(alert)\r\n    .finally(() => dom.hidePreloader());\r\n}\r\n\r\nfunction appStart() {\r\n  dom.showPreloader();\r\n  locationApi\r\n    .getMyIp()\r\n    .then(ip => locationApi.getMyLocation(ip))\r\n    .then(city => getWeatherByCity(city));\r\n}\r\n\r\nappStart();\r\n\r\ndom.findCityInput.addEventListener('keydown', key => {\r\n  if (key.keyCode === 13) {\r\n    getWeatherByCity();\r\n  }\r\n});\r\n\r\ndom.findCityButton.addEventListener('click', () => getWeatherByCity());\r\n"]}